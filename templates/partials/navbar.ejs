
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Shopping</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="#">首頁</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/userProfile">個人資料</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/userCommodity">個人商品</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/newCommodity">新增商品</a>
        </li>
      </ul>
    </div>
    <ul class="nav justify-content-end">
      <li class="nav-item dropdown container">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          帳號
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="/register">創建帳號</a>
          <a class="dropdown-item" href="/login">登入</a>
          <a class="dropdown-item" href="" id="logout">登出</a>
          <script>
            const logoutButton = document.querySelector('#logout');
            logoutButton.addEventListener('click', async (e) => {
              e.preventDefault();
  
              const response = await fetch('/users/logout', {
                method: 'POST',
                headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                }
              });
              console.log(response);
              if (response.status === 200) {
                localStorage.removeItem('jwtToken');
                alert('成功登出');
                document.location.href="/login"
              } else if (response.status === 401) {
                document.location.href="/unauthorized";
              } else {
                alert(response.error); 
              }
            });
          </script>
          <a class="dropdown-item" href="" id="logoutAll">登出所有裝置</a>
          <script>
            const logoutAllButton = document.querySelector('#logoutAll');
            logoutAllButton.addEventListener('click', async (e) => {
              e.preventDefault();
  
              const response = await fetch('/users/logoutAll', {
                method: 'POST',
                headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${localStorage.getItem('jwtToken')}`
                }
              });
              console.log(response);
              if (response.status === 200) {
                localStorage.removeItem('jwtToken');
                alert('成功登出所有裝置');
                document.location.href="/login"
              } else if (response.status === 401) {
                document.location.href="/unauthorized";
              } else {
                alert(response.error); 
              }
            });
          </script>
        </div>
    </ul>
</nav>
